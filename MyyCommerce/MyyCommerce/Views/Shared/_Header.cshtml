@using Microsoft.AspNetCore.Identity
@using MyyCommerce.Domain
@using MyyCommerce.Models
@using System.Security.Claims;
@using MyyCommerce.Data;
@using Microsoft.EntityFrameworkCore;

@inject ApplicationDbContext db

@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager



<div class="sidebar-toggle-box">
    <i class="fa fa-bars"></i>
</div>
<!--logo start-->
<a href="/" class="logo"><h3>MyCommerce</h3></a>
<!--logo end-->


<div class="top-nav ">
    <!--search & user info start-->

    <ul class="nav top-menu">
        @if (!User.IsInRole("Admin"))
        {
            <li class="DesktopMenu">
                <a href="@Url.Action("Vitrine", "Produto")">
                    Produtos
                </a>
            </li>
            <li class="DesktopMenu">
                <a href="@Url.Action("Index", "Pedido")">
                    Meus Pedidos
                </a>
            </li>

        }
        else
        {
            <li><a class="DesktopMenu @Html.IsSelected(controller: "Produto", action:"Vitrine")" asp-area="" asp-controller="Produto" asp-action="Vitrine">Vitrine</a></li>
            <li><a class="DesktopMenu @Html.IsSelected(controller: "Produto", action:"Index")" asp-area="" asp-controller="Produto" asp-action="Index">Produtos</a></li>
            <li><a class="DesktopMenu @Html.IsSelected(controller: "Pedido")" asp-area="" asp-controller="Pedido" asp-action="Index">Pedidos</a></li>
        }
    </ul>
    <ul class="nav pull-right top-menu">
        @if (!User.IsInRole("Slow"))
        {
            <li class="DesktopMenu">
                <a href="@Url.Action("Index", "Checkout")">
                    <i class="fa fa-shopping-cart"></i> Carrinho
                </a>
            </li>
        }
        <li class="MobileMenu">
            <a href="@Url.Action("Index", "Checkout")" style="font-size:1.2rem">
                <i class="fa fa-shopping-cart"></i>
            </a>
        </li>

        @if (SignInManager.IsSignedIn(User))
        {
            <li class="DesktopMenu">
                <a href="~/Identity/Account/Login">
                    Sair
                </a>
            </li>
        }
        else
        {
            <li class="DesktopMenu">
                <a href="~/Identity/Account/Login">
                    Login
                </a>
            </li>
        }
    </ul>
</div>
